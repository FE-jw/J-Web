<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, viewport-fit=cover">
<meta name="format-detection" content="telephone=no">
<title>앞면 동일한 카드 맞추기</title>
<style>
	*	{margin:0;padding:0;}
	.card-wrap	{min-width:320px;max-width:1000px;margin:0 auto;}
	.card-wrap .main-tit,
	.card-wrap .github,
	.card-wrap .card	{visibility:hidden;}
	.card-wrap.on .main-tit,
	.card-wrap.on .github,
	.card-wrap.on .card	{visibility:visible;}
	.main-tit	{padding:20px;font-size:20px;text-align:center;}
	.btn-start	{width:200px;min-height:50px;padding:10px 5px;position:fixed;left:50%;top:50%;border:0;border-radius:0;font-size:20px;font-weight:bold;color:#fff;background-color:seagreen;transform:translate(-50%, -50%);cursor:pointer;box-shadow:10px 10px 20px rgba(0, 0, 0, 0.5);}
	.btn-start .guide	{display:block;font-size:14px;font-weight:lighter;}
	.comment	{visibility:hidden;display:flex;justify-content:center;align-items:center;width:100%;height:100%;position:fixed;left:0;top:0;font-size:100px;font-weight:bold;color:#000;background-color:rgba(0, 0, 0, 0.2);z-index:10;}
	.comment.on	{visibility:visible;}
	.card	{display:flex;justify-content:space-around;flex-wrap:wrap;}
	.card.on	{visibility:visible;}
	.card.checking	{position:relative;}
	.card.checking:after	{content:'';width:100%;height:100%;position:absolute;left:0;top:0;}
	.card li	{list-style:none;width:25%;height:150px;padding:5px;box-sizing:border-box;perspective:500px;}
	.card .flip	{width:100%;height:100%;position:relative;color:#fff;background-color:#333;transition:transform 0.5s;transform-style:preserve-3d;-webkit-backface-visibility:hidden;backface-visibility:hidden;}
	.card .open .flip	{transform:rotateY(180deg);}
	.card .front,
	.card .back	{width:100%;height:100%;position:absolute;-webkit-backface-visibility:hidden;backface-visibility:hidden;box-sizing:border-box;}
	.card .front	{display:flex;justify-content:center;align-items:center;font-size:60px;font-weight:bold;cursor:pointer;}
	.card .back	{border:1px solid #ccc;font:0/0 a;background-repeat:no-repeat;background-position:50% 50%;background-size:60% auto;transform:rotateY(180deg);}
	.card [data-value='1'] .back	{background-image:url('https://fe-jw.github.io/J-Web/posts/2022/1005/1.svg');}
	.card [data-value='2'] .back	{background-image:url('https://fe-jw.github.io/J-Web/posts/2022/1005/2.svg');}
	.card [data-value='3'] .back	{background-image:url('https://fe-jw.github.io/J-Web/posts/2022/1005/3.svg');}
	.card [data-value='4'] .back	{background-image:url('https://fe-jw.github.io/J-Web/posts/2022/1005/4.svg');}
	.card [data-value='5'] .back	{background-image:url('https://fe-jw.github.io/J-Web/posts/2022/1005/5.svg');}
	.github	{margin-top:20px;text-align:center;}

	@media all and (min-width: 568px) and (max-width: 1023px)	{
		.main-tit	{font-size:30px;}
		.card li	{height:250px;}
	}
	
	@media all and (min-width:1024px){
		.main-tit	{font-size:40px;}
		.card li	{width:20%;height:300px;}
	}
</style>
</head>
<body>
<div class="card-wrap">
	<h1 class="main-tit">동일한 카드 맞추기</h1>
	<button type="button" class="btn-start">시작하기!<span class="guide">3초 동안 외워주세요.</span></button>
	<div class="comment">3</div>
	<ul class="card">
		<li class="open">
			<div class="flip">
				<div class="front">?</div>
				<div class="back">back</div>
			</div>
		</li>
		<li class="open">
			<div class="flip">
				<div class="front">?</div>
				<div class="back">back</div>
			</div>
		</li>
		<li class="open">
			<div class="flip">
				<div class="front">?</div>
				<div class="back">back</div>
			</div>
		</li>
		<li class="open">
			<div class="flip">
				<div class="front">?</div>
				<div class="back">back</div>
			</div>
		</li>
		<li class="open">
			<div class="flip">
				<div class="front">?</div>
				<div class="back">back</div>
			</div>
		</li>
		<li class="open">
			<div class="flip">
				<div class="front">?</div>
				<div class="back">back</div>
			</div>
		</li>
		<li class="open">
			<div class="flip">
				<div class="front">?</div>
				<div class="back">back</div>
			</div>
		</li>
		<li class="open">
			<div class="flip">
				<div class="front">?</div>
				<div class="back">back</div>
			</div>
		</li>
		<li class="open">
			<div class="flip">
				<div class="front">?</div>
				<div class="back">back</div>
			</div>
		</li>
		<li class="open">
			<div class="flip">
				<div class="front">?</div>
				<div class="back">back</div>
			</div>
		</li>
	</ul>
	<nav class="github">
		<a href="https://github.com/FE-jw/J-Web/tree/main/posts/2022/1005#readme" target="_blank">Github 바로가기</a>
	</nav>
</div>
<script>
var openCard = [];
var valArr = [];
while (true) {
	var val = Math.floor(Math.random() * 10) + 1;

	if(!valArr.includes(val)){
		valArr.push(val);

		if(valArr.length === 10){
			break;
		}
	}
}

document.querySelector('.btn-start').addEventListener('click', function(){
	this.style.display = 'none';

	document.querySelector('.card-wrap').classList.add('on');
	document.querySelector('.comment').classList.add('on');

	var cntdown = 3;
	var cnt_timer = setInterval(function(){
		document.querySelector('.comment').innerHTML = --cntdown;

		if(cntdown === 1){
			clearInterval(cnt_timer);

			setTimeout(function(){
				document.querySelector('.comment').classList.remove('on');
				document.querySelectorAll('.card li.open').forEach(function(e){
					e.classList.remove('open');
				});
			}, 1000);
		}
	}, 1000);
});

document.querySelectorAll('.card li').forEach(function(e){
	var randomVal = valArr.shift();
	e.dataset.value = randomVal > 5 ? randomVal - 5 : randomVal;

	e.addEventListener('click', function(){
		if(!this.classList.contains('open')){
			openCard.push(this);
			this.classList.add('open');

			var cardWrap = document.querySelector('.card');
	
			if(openCard.length === 2){
				cardWrap.classList.add('checking');
	
				if(openCard[0].dataset.value != openCard[1].dataset.value){
					setTimeout(function(){
						openCard.forEach(function(e){
							e.classList.remove('open');
						});
					}, 500);
				}
	
				setTimeout(function(){
					openCard = [];
					cardWrap.classList.remove('checking');

					if(cardWrap.querySelectorAll('li.open').length === 10){
						console.log('complete');
						document.querySelector('.comment').classList.add('on');
						document.querySelector('.comment').innerHTML = '성공';
					}
				}, 500);
			}
		}
	});
});
</script>
</body>
</html>